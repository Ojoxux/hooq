# todo

- [x] 関数の `return` をつけていない返り値にも対応する
- [ ] 特殊文法に対応
  - [x] `$expr`: フックする対象式の内容をそのまま出力
  - [x] `$nth` / `$count`: 何番目の `?` / `return` かと、その種別を示す
    - 最後の返り値である場合はそのことも示す
  - [ ] `$tag`: タグがある場合にそれを出力。ない場合は `(no tag)` を出力
  - [x] `$line`: 行番号を出力 ( `nightly` では正確な位置、 `stable` では `line!()` を利用 )
    - Span情報を利用
  - [x] `$file`: ファイル名を出力
    - ~~Span情報を利用~~
    - ~~`file!()` マクロでも可で、同じ結果が得られると考えられるが、一応仕組みが異なる~~
      - ~~将来的にモジュールにもouter attributeで付与できる機能を導入する場合、 `Span` 情報を利用した場合との差が出ると考えられる~~
      - `nightly` だけならばいざ知らず、 `procmacro2_semver_exempt` が必要になったためただのエイリアスにすること決定！
  - [x] `$fn`: 関数の情報を出力
    - [x] ~~`$fn_pos`: 関数の位置を出力。仕組みは `line!()` を利用~~
      - `$line` ( `line!()` ) を活用すれば良いため使用しないこととした
    - [x] `$fn_name`: 関数名を出力
    - [x] `$fn_sig`: 関数のシグネチャを出力
    - [x] ~~`$fn_path`: 関数のパスを出力~~
      - 取得難易度が高い & `$file` ( `file!()` ) を活用すれば良いため使用しないこととした
- [ ] use_ の実装 (プリセットの用意)
- [ ] デフォルトでは debug 時のみ出力とし、 release 時出力を指定するためのオプションを設ける
- [ ] メソッドを文中アトリビュートでの指定にも対応 (メソッドオーバーライド)
- 現状は関数に対しての outer attribute としてのみ
  - [ ] モジュールへの outer attribute / inner attribute に対応する
  - この場合の挙動は、モジュール内でトップに定義された全ての関数へのフック付与
    - ~~上述の `$file` 変数について、作り方次第では杞憂で終わる可能性もあるため、YAGNIを破る感じにはなる...~~
    - その作り方次第の詳細: `#[hooq]` により `#[hooq]` を関数の属性としてつける場合問題なくなる可能性。検証してみないとわからないけども(多分無理)
    - [ ] 上述の通りとしたのでモジュールに outer attribute として付与した場合、正確な位置を示さなくなる可能性が出てきた。要検証
- ~~以下は余力があれば~~
- ~~[ ] `$mod`: モジュールの情報を出力~~
  - ~~[ ] `$mod_name`: モジュール名を出力~~
  - ~~[ ] `$mod_path`: モジュールのパスを出力~~
- ~~[ ] `$crate`: クレートの情報を出力~~
  - ~~[ ] `$crate_name`: クレート名を出力~~
  - ~~[ ] `$crate_path`: クレートのパスを出力~~
